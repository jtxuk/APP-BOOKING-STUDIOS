# ğŸ“Š Diagramas y Flujos Visuales

## ğŸ”„ Flujo General de AutenticaciÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  1. PRIMERA APERTURA DE LA APP                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                   â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚     â”‚  App Abre    â”‚                                             â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚            â”‚                                                      â”‚
â”‚            â–¼                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚     â”‚ Â¿Token en SecureStore?â”‚                                    â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                    â”‚
â”‚            â”‚           â”‚                                          â”‚
â”‚         NO â”‚           â”‚ SÃ                                      â”‚
â”‚            â”‚           â”‚                                          â”‚
â”‚            â–¼           â–¼                                          â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚     â”‚ LoginScreen  â”‚  â”‚ HomeScreen       â”‚                       â”‚
â”‚     â”‚              â”‚  â”‚ (Estudios)       â”‚                       â”‚
â”‚     â”‚ Email        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚     â”‚ Password     â”‚                                             â”‚
â”‚     â”‚ [Login]      â”‚                                             â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚            â”‚                                                      â”‚
â”‚            â–¼                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚     â”‚ POST /api/auth/login â”‚                                     â”‚
â”‚     â”‚ Server verifica      â”‚                                     â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                    â”‚
â”‚            â”‚           â”‚                                          â”‚
â”‚         OK â”‚           â”‚ ERROR                                   â”‚
â”‚            â”‚           â”‚                                          â”‚
â”‚            â–¼           â–¼                                          â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚     â”‚ Guardar      â”‚  â”‚ Mostrar      â”‚                           â”‚
â”‚     â”‚ Token en     â”‚  â”‚ Error        â”‚                           â”‚
â”‚     â”‚ SecureStore  â”‚  â”‚              â”‚                           â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚            â”‚                                                      â”‚
â”‚            â–¼                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚     â”‚ HomeScreen           â”‚                                     â”‚
â”‚     â”‚ (Tab Navigator)      â”‚                                     â”‚
â”‚     â”‚ â”œâ”€ Estudios          â”‚                                     â”‚
â”‚     â”‚ â”œâ”€ Mis Reservas      â”‚                                     â”‚
â”‚     â”‚ â””â”€ Perfil            â”‚                                     â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“… Flujo de Reserva Detallado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FLUJO COMPLETO DE RESERVA                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. PANTALLA INICIAL - ESTUDIOS
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ GET /api/studios         â”‚
   â”‚ â†“                        â”‚
   â”‚ BOX 1    â”‚ BOX 2         â”‚
   â”‚ BOX 4    â”‚ BOX 5         â”‚
   â”‚ BOX 6    â”‚ ESTUDIO B     â”‚
   â”‚ ESTUDIO Câ”‚ ESTUDIO D     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
2. USUARIO SELECCIONA ESTUDIO
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Ir a CalendarScreen      â”‚
   â”‚ studio = Studio A        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
3. CALENDARIO
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Mostrar Calendario       â”‚
  â”‚ Bloquear festivos        â”‚
   â”‚ Seleccionar Fecha        â”‚
   â”‚ (default: hoy)           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
4. CARGAR HORARIOS
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ GET /api/studios/1/      â”‚
   â”‚ slots/2026-01-16         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
5. MOSTRAR SLOTS
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 08:00-11:00 DISPONIBLE   â”‚ â† Verde
   â”‚ 11:00-14:00 JPZ          â”‚ â† Rojo (Reservado)
   â”‚ 14:00-17:00 DISPONIBLE   â”‚ â† Verde
   â”‚ 17:00-20:00 DISPONIBLE   â”‚ â† Verde
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
6. USUARIO SELECCIONA SLOT
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Tap en 08:00-11:00       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
7. VALIDACIONES EN BACKEND
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ POST /api/bookings/      â”‚
   â”‚ create                   â”‚
   â”‚ {                        â”‚
   â”‚   studioId: 1,           â”‚
   â”‚   timeSlotId: 123,       â”‚
   â”‚   bookingDate: 2026-01-16â”‚
   â”‚ }                        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ Â¿Usuario autenticado? â”€â”€NOâ”€â”€> 401 Error
          â”‚
          â”œâ”€ Â¿< 2 reservas? â”€â”€NOâ”€â”€> 400 "Max 2 bookings"
          â”‚
          â”œâ”€ Â¿Slot disponible? â”€â”€NOâ”€â”€> 400 "Slot booked"
          â”‚
          â”œâ”€ Â¿No consecutivo? â”€â”€NOâ”€â”€> 400 "Consecutive slots"
          â”‚
          â–¼
8. CREAR BOOKING
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ INSERT INTO bookings     â”‚
   â”‚ status = 'confirmed'     â”‚
   â”‚ â†“                        â”‚
   â”‚ 201 Created              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
9. ACTUALIZAR UI
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Mostrar confirmaciÃ³n     â”‚
   â”‚ Recargar slots           â”‚
   â”‚ Slot 1 ahora dice "TUN"  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
10. USUARIO VE EN "MIS RESERVAS"
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ GET /api/bookings/       â”‚
    â”‚ my-bookings              â”‚
    â”‚ â†“                        â”‚
    â”‚ Studio A                 â”‚
    â”‚ 08:00-11:00              â”‚
    â”‚ 2026-01-16               â”‚
    â”‚ [Cancelar]               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Modelo de Datos (ER Diagram)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      USERS       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚
â”‚ username         â”‚
â”‚ email (UNIQUE)   â”‚
â”‚ password_hash    â”‚
â”‚ initials         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ created_at       â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
         â–²                     â”‚
         â”‚ (1:N)              â”‚
         â”‚                     â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚                   â”‚      â”‚
    â”‚                   â”‚      â”‚
â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   BOOKINGS    â”‚   â”‚    STUDIOS      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)       â”‚   â”‚ id (PK)         â”‚
â”‚ user_id (FK)  â”œâ”€â”€â–ºâ”‚ name            â”‚
â”‚ studio_id (FK)â”œâ”€â”€â–ºâ”‚ description     â”‚
â”‚ time_slot_id  â”‚   â”‚ created_at      â”‚
â”‚ booking_date  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ status        â”‚            â”‚ (1:N)
â”‚ created_at    â”‚            â”‚
â”‚ cancelled_at  â”‚            â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
    â”‚                        â”‚
    â”‚ (N:1)                  â”‚
    â”‚                        â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚   â”‚
    â””â”€â”€â–ºâ”‚
        â”‚
    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   TIME_SLOTS        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ id (PK)             â”‚
    â”‚ studio_id (FK)      â”‚
    â”‚ slot_number (1-4)   â”‚
    â”‚ start_time (HH:MM)  â”‚
    â”‚ end_time (HH:MM)    â”‚
    â”‚ slot_date (DATE)    â”‚
    â”‚ created_at          â”‚
    â”‚                     â”‚
    â”‚ UNIQUE(studio_id,   â”‚
    â”‚ slot_number,        â”‚
    â”‚ slot_date)          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Arquitectura de Componentes Frontend

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   App.js (Root)                      â”‚
â”‚  - NavigationContainer                              â”‚
â”‚  - Stack Navigator (Auth/App)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚
        â–¼             â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Auth    â”‚   â”‚ Authenticated    â”‚
   â”‚ Stack   â”‚   â”‚ Stack (Tabs)     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                 â”‚
        â”‚                 â”œâ”€ StudioStack
        â”‚                 â”‚  â”œâ”€ StudioListScreen
        â”‚                 â”‚  â””â”€ CalendarScreen
        â”‚                 â”‚
        â”‚                 â”œâ”€ MyBookingsScreen
        â”‚                 â”‚
        â”‚                 â””â”€ ProfileScreen
        â”‚
        â””â”€ LoginScreen


FLUJO:
LoginScreen (form)
     â”‚
     â”œâ”€ ValidaciÃ³n local
     â”‚
     â”œâ”€ Llamar api.js
     â”‚     â”‚
     â”‚     â””â”€ POST /auth/login
     â”‚
     â””â”€ Si OK: Guardar token + ir a home
       Si FAIL: Mostrar error
```

---

## ğŸ” Flujo de Seguridad

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. CLIENTE (Frontend React Native)          â”‚
â”‚                                              â”‚
â”‚  axios.interceptors.request.use(config => {  â”‚
â”‚    token = SecureStore.getItem('userToken')  â”‚
â”‚    config.headers.Authorization =            â”‚
â”‚      'Bearer ' + token                       â”‚
â”‚    return config                             â”‚
â”‚  })                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ EnvÃ­a request con token
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. SERVIDOR (Backend Express)               â”‚
â”‚                                              â”‚
â”‚  app.use((req, res, next) => {               â”‚
â”‚    const token = req.headers.authorization   â”‚
â”‚    jwt.verify(token, JWT_SECRET)             â”‚
â”‚    if valid â†’ next()                         â”‚
â”‚    if invalid â†’ 401 Unauthorized             â”‚
â”‚  })                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”œâ”€ Valid JWT
              â”‚  â”‚
              â”‚  â–¼
              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ â”‚ Procesar request    â”‚
              â”‚ â”‚ Validar negocio     â”‚
              â”‚ â”‚ Ejecutar query      â”‚
              â”‚ â”‚ Retornar 200/201    â”‚
              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â””â”€ Invalid/Expired
                 â”‚
                 â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Retornar 401        â”‚
              â”‚ Error: "Invalid     â”‚
              â”‚ token"              â”‚
              â”‚                     â”‚
              â”‚ Cliente â†’ Login     â”‚
              â”‚ de nuevo            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Estados de Booking

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ created â”‚ (temporal)
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ confirmed    â”‚
                  â”‚ (activa)     â”‚
                  â””â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
                    â”‚          â”‚
              [Cancelar]   [Pasa el tiempo]
                    â”‚          â”‚
                    â–¼          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚cancelled â”‚  â”‚completedâ”‚
              â”‚(anuladda)â”‚  â”‚(pasada) â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


En la BD guardamos:
- status: 'confirmed' o 'cancelled'
- Si cancelled: cancelled_at = CURRENT_TIMESTAMP
```

---

## ğŸŒŠ Request/Response HTTP

### Login

```http
POST /api/auth/login HTTP/1.1
Host: localhost:5000
Content-Type: application/json

{
  "email": "juan@example.com",
  "password": "123456"
}

---

HTTP/1.1 200 OK
Content-Type: application/json

{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "username": "Juan Perez",
    "email": "juan@example.com",
    "initials": "JPZ"
  }
}
```

### Get Slots

```http
GET /api/studios/1/slots/2026-01-16 HTTP/1.1
Host: localhost:5000
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

---

HTTP/1.1 200 OK
Content-Type: application/json

[
  {
    "id": 101,
    "slot_number": 1,
    "start_time": "08:00",
    "end_time": "11:00",
    "studio_id": 1,
    "status": "available",
    "user_id": null,
    "initials": null
  },
  {
    "id": 102,
    "slot_number": 2,
    "start_time": "11:00",
    "end_time": "14:00",
    "studio_id": 1,
    "status": "booked",
    "user_id": 2,
    "initials": "MGC"
  }
]
```

### Create Booking

```http
POST /api/bookings/create HTTP/1.1
Host: localhost:5000
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

{
  "studioId": 1,
  "timeSlotId": 101,
  "bookingDate": "2026-01-16"
}

---

HTTP/1.1 201 Created
Content-Type: application/json

{
  "id": 1,
  "user_id": 1,
  "studio_id": 1,
  "time_slot_id": 101,
  "booking_date": "2026-01-16",
  "status": "confirmed",
  "created_at": "2026-01-16T10:30:00.000Z"
}
```

---

## ğŸ“± NavegaciÃ³n en la App

```
LOGIN
  â”‚
  â””â”€[Login vÃ¡lido]â”€â”€â–º HOME (Tab Navigator)
                        â”‚
                        â”œâ”€ STUDIOS TAB
                        â”‚  â”œâ”€ StudioListScreen
                        â”‚  â”‚  â””â”€ Tap studio â†’ CalendarScreen
                        â”‚  â”‚
                        â”‚  â””â”€ CalendarScreen
                        â”‚     â””â”€ Tap slot â†’ createBooking()
                        â”‚
                        â”œâ”€ MY BOOKINGS TAB
                        â”‚  â””â”€ MyBookingsScreen
                        â”‚     â””â”€ Tap cancel â†’ cancelBooking()
                        â”‚
                        â””â”€ PROFILE TAB
                           â””â”€ ProfileScreen
                              â””â”€ Tap logout â†’ LoginScreen
```

---

## â±ï¸ Timeline de EjecuciÃ³n

```
Usuario abre app
â”‚
â”œâ”€ 0ms: App.js monta
â”‚
â”œâ”€ 50ms: Lee token de SecureStore
â”‚
â”œâ”€ 100ms: Si no hay token â†’ LoginScreen
â”‚
â”œâ”€ 200ms: Usuario ingresa credenciales
â”‚
â”œâ”€ 300ms: Presiona "Iniciar SesiÃ³n"
â”‚
â”œâ”€ 350ms: Valida campos locales
â”‚
â”œâ”€ 400ms: POST /api/auth/login
â”‚
â”œâ”€ 500ms: Backend verifica en BD
â”‚
â”œâ”€ 550ms: Retorna token
â”‚
â”œâ”€ 600ms: Guarda en SecureStore (encriptado)
â”‚
â”œâ”€ 650ms: Navega a HomeScreen
â”‚
â”œâ”€ 700ms: Carga lista de estudios
â”‚
â”œâ”€ 750ms: GET /api/studios
â”‚
â”œâ”€ 850ms: Muestra 6 estudios
â”‚
â””â”€ Usuario puede interactuar
```

---

Estos diagramas te ayudan a entender cÃ³mo funciona toda la aplicaciÃ³n visualmente.
